services:
  template.common.unittests:
    container_name: temp.common.unit-tests
    build:
      context: .
      dockerfile: Template.Common.UnitTests/Dockerfile
    volumes:
     - /opt/vsts/work/_temp:/var/temp
     - ./coverage-report:/coverage-report
    command: dotnet test --logger trx --results-directory /var/temp --collect:"XPlat Code Coverage" /p:CoverletOutputFormat=cobertura
     
  # template.application.unittests:
  #   image: ${DOCKER_REGISTRY-}templateapplicationunittests
  #   container_name: temp.application.unit-tests
  #   build:
  #     context: .
  #     dockerfile: Template.Application.UnitTests/Dockerfile
  #   volumes:
  #    - /opt/vsts/work/_temp:/var/temp
  #   #depends_on:
  #   #  - template.mailsender.unittests
  
  #template.mailsender.unittests:
  #  image: ${DOCKER_REGISTRY-}templatemailsenderunittests
  #  container_name: temp.mailsender.unit-tests
  #  build:
  #    context: .
  #    dockerfile: Template.MailSender.UnitTests/Dockerfile
  #  volumes:
  #   - /opt/vsts/work/_temp:/var/temp     